<!DOCTYPE html>
<html>
<head>
<title>Phil Shenk</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-indigo.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<style>
.chart-card.mdl-card {
  //width: 788px;
  //color: #aaaaaa;
}

.chart-card.mdl-card__media {
  //color: #aaaaaa;
  width: 100%;
}
.mdl-card__media > img {
  //max-width: 100%;
  width: 100%;
  color: #aaaaaa;
}

.phil-layout-transparent {
  background: url('assets/earth.jpg') center / cover;
}
.phil-layout-transparent .mdl-layout__header,
.phil-layout-transparent .mdl-layout__drawer-button {
  color: white;
}

.wideboi-card.mdl-card {
  width: 100%;
  color: #fff;
  opacity: 0;
  background: url('assets/atlas.jpg') center / cover;
  
  transition: opacity 1s;
}
.wideboi-card > .mdl-card__title {
  color: #fff;
  height: 176px;
  opacity: 1;
}
.wideboi-card > .mdl-card__menu {
  color: #fff;
  
}
.wideboi-card > .mdl-card__supporting-text {
  color: #fff;
  
}
.wideboi-card > .mdl-card__actions {
  color: #000000;
  
}

.wideboi-card:hover{
	opacity: 1;
}

</style>

<script>
var hosts = [];
var imgWidth = 768;
var imgHeight = 513;
var imgPadding = 0;
var imgBorder = 0;
var gridColumns = 6; //keep track of grid sizing
var width;
var height;



function initialize(){
	
}

function setCellSize(size){
	gridColumns = size;
	elements = document.getElementsByClassName("mdl-cell");
	for(i=0; i<elements.length; i++){
		//elements.item(i).className = ("chart-card mdl-cell mdl-card mdl-shadow--16dp mdl-color--blue-grey-100 mdl-cell--"+gridColumns+"-col");
		elements.item(i).className = ("chart-card mdl-cell mdl-card mdl-shadow--16dp mdl-cell--"+gridColumns+"-col"); // mdl-color--blue-grey-100
	}
}

//high level function to add everything necessary for a new graph and set it up
function addGraph(ip){
	//make a new cell containing a new card @ index hosts.length with 'ip' as the src
	//to insert @ end:    document.getElementById('card_grid').appendChild(newCell(newCard(hosts.length, ip)));
	document.getElementById('card_grid').insertBefore(newCard(hosts.length, ip), document.getElementById('newGraph_Button_Cell'));
	hosts.push(ip);
}

//unused now(hopefully)
function newCell(content){
	var cell = document.createElement('div');
	cell.className = 'mdl-cell mdl-cell--'+gridColumns+'-col';
	cell.setAttribute('align','center');
	cell.appendChild(content);
	return cell;
}

function newCard(index, ip){
	// create new card and put it in the grid
	var card = document.createElement('div');
	card.id = 'card'+index;
	card.className = 'chart-card mdl-cell mdl-cell--'+gridColumns+'-col mdl-color--grey-300 mdl-card mdl-shadow--16dp';
	card.setAttribute('align','center');
	//card.setAttribute('width',imgWidth);

	// create mdl-card__media and put in card
	var card__media = document.createElement('div');
	card__media.setAttribute('align', 'center');
	card__media.className = 'mdl-card__media';
	card.appendChild(card__media);
	
	//add img to the card__media
	var img = document.createElement('img');
	img.id = 'img'+index;
	img.setAttribute('style', "padding:"+imgPadding+"px;");
	img.setAttribute('border', imgBorder);
	img.setAttribute('onerror', this.src="nanowires.png");
	//img.setAttribute('onerror', function(){
	//	this.style.display = "block";
	//  //show a div tag with loading bar etc.
	//});
	img.setAttribute('alt', "(0__0) can't connect to image server "+ip+"...");
	img.setAttribute('align', 'center');
	//img.onload = function() {
		//whenever the pic loads (every second currently)
	//}
	if(index < hosts.length){
		//img.src = "http://"+ip+"/DataServer/GetFrontPanelControlImage";
		img.src = ""+ip;  //ending has to be hard coded for now depending on which graph
	}else{
		img.src = "nanowires.png";
	}
	card__media.appendChild(img);
	
	//add supporting text description to the card
	var desc = document.createElement('div');
	desc.className = 'mdl-card__supporting-text';
	desc.setAttribute('align','center');
	desc.innerHTML = "Insert Description Here.";
	card.appendChild(desc);
	
	//add text field stuff for changing ip
	var ipFieldDiv = document.createElement('div');
	var ipForm = document.createElement('form');
	ipForm.setAttribute('action', '#');
	ipForm.setAttribute("onsubmit", "updateHost("+index+", document.getElementById('host'+"+index+").value)");
	var ipField = document.createElement('div');
	ipField.className='mdl-textfield mdl-js-textfield mdl-textfield--floating-label';
	var input = document.createElement('input');
	input.className='mdl-textfield__input';
	input.setAttribute('type','text');
	input.setAttribute('value',ip);
	input.setAttribute('id','host'+index);
	//var label = document.createElement('label');//
	//label.className='mdl-textfield__label';     //
	//label.setAttribute('for','host'+index);     //
	//label.innerHTML = "Data Host IP";           //
	ipField.appendChild(input);
	//ipField.appendChild(label);					//
	ipForm.appendChild(ipField);
	ipFieldDiv.appendChild(ipForm);
	card.appendChild(ipFieldDiv);
	//alert(document.getElementById("host"+index).value);
	//ipForm.setAttribute('onsubmit', 'updateHost('+index+', '+document.getElementById("host"+index).value+')');
	
	return card;
}

//style="background-color:grey;"
</script>
</head>

<body onload="initialize()" style="background-color: #000000;" >

	<!-- Always shows a header, even in smaller screens. -->
	<div class="phil-layout-transparent mdl-layout mdl-js-layout mdl-layout--fixed-header">
		<header class="mdl-layout__header mdl-layout__header--transparent">
			<div class="mdl-layout__header-row">
				<span class="mdl-layout-title">Phil Shenk</span>
				<!-- Add spacer, to align navigation to the right -->
				<div class="mdl-layout-spacer"></div>
			</div>
		</header>
		<div class="mdl-layout__drawer">
			<span class="mdl-layout-title">W̞̙̲͓͉̤̟̖̯͔̻̰̩̣̦͙̱̼͌̿͒̇̾E͇̼̼̠͉̎͐̿͊L̦̳̱̥̗̭̫͖͓͙̥̮̟̞̠͙̹̿ͫ̌̎ͬͅC̭͓̠̤̹͙ͨ̆͗́ͬ̉̒̎̊̓̍̈ͮ̾̉̄̅̈O̰͇̘̣̹̼͎͔̖͕̪̜̺͙͎̫ͪ̈́̍̓ͪͪͧ́͑ͯͅͅM̼͎̪̜̿̄̇̀͐̔ͪE͉̖̤̻̝̫̙̱͚͔͇ͦ̄ͭ͐̓ͯ</span>
			<nav class="mdl-navigation">
				<a class="mdl-navigation__link" href="https://www.wikipedia.org/">Wikipedia</a>
				<a class="mdl-navigation__link" href="../index.html">intro page</a>


				<div>
					<!-- Slider with Starting Value -->
					<input class="mdl-slider mdl-js-slider" type="range"
						min="1" max="12" value=gridColumns tabindex="0" onInput="setCellSize(value)">
					</div>
				<div class="mdl-layout-spacer"></div>			
				<button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" onClick="addGraph('localhost:8003')">
					Create New Cell
				</button>
			</nav>
			
		</div>
		
		<main class="mdl-layout__content">
			
			<div class="page-content">
				<!-- GRID -->
				<div class="mdl-grid" id="content_grid">
					<div id="welcomecard" class="wideboi-card mdl-cell mdl-card mdl-shadow--2dp">
						<div class="mdl-card__title">
							<h2 class="mdl-card__title-text">Welcome</h2>
						</div>
						<div class="mdl-card__supporting-text">
							I'm Phil, this is my website.
						</div>
						
						<div class="mdl-card__menu">
							<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
								<i class="material-icons">share</i>
							</button>
						</div>
					</div>
					<div class="wideboi-card mdl-cell mdl-card mdl-shadow--2dp">
						<div class="mdl-card__title">
							<h2 class="mdl-card__title-text">Welcome</h2>
						</div>
						<div class="mdl-card__supporting-text">
							I'm Phil, this is my website.
						</div>
						
						<div class="mdl-card__menu">
							<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
								<i class="material-icons">share</i>
							</button>
						</div>
					</div>
					<div class="wideboi-card mdl-cell mdl-card mdl-shadow--2dp">
						<div class="mdl-card__title">
							<h2 class="mdl-card__title-text">Welcome</h2>
						</div>
						<div class="mdl-card__supporting-text">
							I'm Phil, this is my website.
						</div>
						
						<div class="mdl-card__menu">
							<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
								<i class="material-icons">share</i>
							</button>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>
</body>
</html>